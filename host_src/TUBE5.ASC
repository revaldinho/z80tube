10 ' AMSTRAD CPC - Acorn Tube Host Code
20 ' (C) 2018 Hoglet, BigEd, Revaldinho
30 MODE 2
40 INK 0,0 : INK 1,26 : BORDER 0
50 MEMORY HIMEM-512
60 start = HIMEM+1
70 GOSUB 400
80 I=7
90 B=0
100 C=-1
110 OUT &FC16,I
120 OUT &FC10,&A0
130 OUT &FC10,&20
140 CALL start
150 A = INP(&FC12)
160 IF (A AND &80)=0 THEN GOTO 140
170 A =INP(&FC13)
180 'PRINT RIGHT$("0"+HEX$(A),2);" ";
190 IF B>0 THEN GOTO 230  
200 IF B=0 AND A<>&A THEN GOTO 140
210 B=5
220 GOTO 140
230 B=B-1
240 IF B<>0 THEN GOTO 140
250 T=&7F : GOSUB 300
260 INPUT T$
270 GOSUB 340
280 GOTO 140
290 END
300 S= INP(&FC12)
310 IF (S AND &40)=0 THEN GOTO 300
320 OUT &FC13, T
330 RETURN
340 FOR i=1 TO LEN(T$)
350   T= ASC(MID$(T$,i,1))
360   GOSUB 300
370 NEXT
380 T=13 : GOSUB 300
390 RETURN
400 |ASSEMBLE
410 '.top
420 'LD B,&FC
430 'LD C,&10
440 'IN A,(C)
450 'AND A, &80
460 'RET Z
470 'LD C,&11
480 'IN A,(C)
490 'PUSH AF
500 'CALL &BB5A
510 'POP AF
520 'CP A,0
530 'JR NZ, top
540 'LD B,&FC
550 'LD C,&13
560 'LD A,&7F
570 'OUT (C),A
580 'JR top
590 'END
600 RETURN
